var e,r=require("react"),t=require("rxjs"),n=require("rxjs/operators"),u=(e=require("immer"))&&"object"==typeof e&&"default"in e?e.default:e,i=function(e){function r(r,n){var u=this;e.call(this,function(e){var r=u.__notifier.subscribe(e);return r&&!r.closed&&e.next(u.value),r}),this.value=n,this.__notifier=new t.Subject,this.__subscription=r.subscribe(function(e){e!==u.value&&(u.value=e,u.__notifier.next(e))})}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(t.Observable);exports.StateObservable=i,exports.useEpics=function(e,c,o){void 0===o&&(o=[]);var f,s=r.useRef(null),a=r.useRef(null),l=r.useState(null),p=l[0],v=l[1],b=r.useMemo(function(){return u(function(r,t){return e(r)[t.type](t.payload)})},[e]),d=r.useReducer(b,c),h=d[0],_=d[1];r.useEffect(function(){s.current=new t.BehaviorSubject(c).pipe(n.observeOn(t.queueScheduler),n.distinctUntilChanged()),a.current=(new t.Subject).pipe(n.observeOn(t.queueScheduler));var e=new i(s.current,c),r=o.map(function(r){return r(a.current,e,f)}).map(function(e){return e.subscribe()});return function(){return r.forEach(function(e){return e.unsubscribe()})}},[]);var y=Object.keys(e(c));return f=r.useMemo(function(){return y.reduce(function(e,r){return e[r]=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(e){var t={type:r,payload:e};void 0!==b(h,t)&&_(t),v(t)}(e)},e},{})},[f,h,e,_,y]),r.useEffect(function(){p&&s.current&&a.current&&(s.current.next(h),a.current.next(p),v(null))},[p,s.current,a.current]),[h,f]},exports.ofType=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return function(r){return r.pipe(n.filter(function(r){if(!r)return!1;var t=r.type,n=e.length;if(1===n)return t===e[0];for(var u=0;u<n;u++)if(t===e[u])return!0;return!1}))}};
//# sourceMappingURL=use-epics.js.map
